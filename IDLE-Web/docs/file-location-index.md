# IDLE-Web File Location Index

> **Generated by**: codebase-cartographer
> **Last Updated**: 2026-01-29
> **Scope**: Quick reference for finding code by purpose
> **Format**: "Need X? Look in Y"

## Quick Navigation

Need to find something? Use this index to locate code quickly without scanning the entire codebase.

## By Feature

### Resources
- **All resource definitions**: `/src/app/models/resource.model.ts`
- **Resource enum**: `ResourceId` enum, ~56 resources (Tier 1-5 + Credits)
- **Resource lookup**: `RESOURCE_DEFINITIONS: Record<ResourceId, ResourceDefinition>`

### Facilities
- **All facility definitions**: `/src/app/models/facility.model.ts`
- **Facility enum**: `FacilityId` enum, ~50 facilities (T1-T5 + support + temp)
- **Facility lookup**: `FACILITY_DEFINITIONS: Record<FacilityId, FacilityDefinition>`
- **Construction mechanics**: `/src/app/services/construction.service.ts`
- **Cost calculation formula**: ConstructionService.calculateConstructionCost()

### Celestial Bodies
- **Body definitions**: `/src/app/models/celestial-body.model.ts`
- **Body types**: BodyType enum (Star, Moon, MoonIcy, Terrestrial, etc.)
- **Body features**: BodyFeature enum (HighMetalContent, FertileSoil, etc.)
- **Population multipliers**: CelestialBody model documentation

### Star Systems
- **System definitions**: `/src/app/models/star-system.model.ts`
- **System rarity**: SystemRarity enum (Common, Uncommon, Rare, etc.)
- **System states**: SystemState enum (Stable, Prosperous, Famine, etc.)
- **Galaxy generation**: `/src/app/services/galaxy-generator.service.ts`

### Ships & Fleet
- **Ship definitions**: `/src/app/models/ship.model.ts`
- **Ship types**: ShipType enum (Scout, Freighter)
- **Ship sizes**: ShipSize enum (Light, Medium, Heavy, Bulk)
- **Ship tiers**: ShipTier enum (Basic, Standard, Advanced, Elite)
- **Ship status**: ShipStatus enum (Idle, InTransit)
- **Trade routes**: TradeRoute interface in ship.model.ts
- **Scout missions**: ScoutMission interface in ship.model.ts
- **Ship construction**: `/src/app/services/stellar-forge.ts`

### Production & Processing
- **Production service**: `/src/app/services/production.service.ts`
- **Tier order processing**: See ProductionService.processProduction()
- **Extraction logic**: ProductionService.processExtraction()
- **Conversion logic**: ProductionService.processConversion()
- **Throughput decay**: ProductionService.calculateThroughputDecay()

### Population & Standard of Living
- **Population service**: `/src/app/services/population.service.ts`
- **Growth formula**: PopulationService.calculatePopulationGrowth()
- **Pull factors**: PopulationService.calculatePullFactors()
- **Floor/ceiling**: PopulationService methods
- **Consumption**: PopulationService.calculateConsumption()
- **Production bonus**: PopulationService applied as multiplier

### Exploration & Scouts
- **Exploration service**: `/src/app/services/exploration.service.ts`
- **Scout missions**: launchScoutMission(), completeMission()
- **Galaxy generation**: `/src/app/services/galaxy-generator.service.ts`
- **System discovery**: GalaxyGeneratorService.generateSystem()
- **Body generation**: GalaxyGeneratorService.generateBodies()

### Colonization
- **Colonization service**: `/src/app/services/colonization.service.ts`
- **Colony mechanics**: startColonization(), deliverToColony(), completeColonization()
- **Colony ship**: FacilityId.ColonyShip in facility.model.ts
- **Trade outpost**: FacilityId.TradeOutpost in facility.model.ts

### Trade Routes
- **Trade service**: `/src/app/services/trade.service.ts`
- **Trade route setup**: setupTradeRoute(), cancelTradeRoute()
- **Route processing**: processTradeRoutes()
- **Galactic market**: buyFromMarket(), sellToMarket()
- **Market prices**: GameState.marketPrices
- **Ship efficiency**: Ship interface properties (speed, fuelEfficiency)

### Transport Missions (NEW - GDD v6)
- **Transport service**: `/src/app/services/supply-transport.service.ts`
- **Transport mission model**: `/src/app/models/transport-mission.model.ts`
- **One-way missions**: launchOneWayMission()
- **Round-trip missions**: launchRoundTripMission()
- **Recurring routes**: setupTransportRoute()
- **Mission processing**: processTransportMission()
- **Fuel calculation**: calculateFuelCost()
- **Travel time**: calculateTravelTime()

### Game State & Persistence
- **Game state service**: `/src/app/services/game-state.service.ts`
- **State model**: `/src/app/models/game-state.model.ts`
- **Save/load**: GameStateService.saveGame(), loadGame()
- **Migrations**: GameStateService.migrateGameState()
- **Settings**: GameSettings interface
- **Statistics**: GameStats interface
- **Notifications**: Notification interface

### Game Loop
- **Game loop service**: `/src/app/services/game-loop.service.ts`
- **Main tick**: GameLoopService.tick()
- **Offline calculation**: calculateOfflineTime()
- **Offline progression**: processOfflineProgression()

### Home System (Sol)
- **Home system setup**: `/src/app/services/home-system.service.ts`
- **Starting resources**: INITIAL_GAME_RESOURCES or equivalent
- **Starting ships**: 1 Scout, 1 Freighter
- **Sol bodies**: Sol 1-4 with starting facilities

### Prestige System
- **Prestige service**: `/src/app/services/prestige.service.ts`
- **Prestige model**: `/src/app/models/prestige.model.ts`
- **Token calculation**: PrestigeService.calculatePrestigeTokens()
- **Reset mechanics**: PrestigeService.prestigeReset()

## By File Type

### Model Files
| File | Contains |
|------|----------|
| `resource.model.ts` | ResourceId, ResourceDefinition, RESOURCE_DEFINITIONS |
| `facility.model.ts` | FacilityId, FacilityDefinition, FACILITY_DEFINITIONS |
| `celestial-body.model.ts` | BodyType, BodyFeature, CelestialBody |
| `star-system.model.ts` | SystemRarity, SystemState, StarSystem |
| `ship.model.ts` | ShipType, ShipSize, ShipTier, ShipStatus, Ship, TradeRoute, ScoutMission |
| `game-state.model.ts` | GameState, GameSettings, GameStats, Notification |
| `prestige.model.ts` | PrestigeState |
| `transport-mission.model.ts` | TransportMission (one-way/round-trip/recurring) |
| `index.ts` | Barrel export of all models |

### Service Files
| File | Responsibility |
|------|-----------------|
| `game-state.service.ts` | Central state hub, signals, persistence |
| `game-loop.service.ts` | Tick handler, offline calculation |
| `production.service.ts` | Resource generation, tier processing |
| `population.service.ts` | Population growth, pull factors |
| `exploration.service.ts` | Scout missions, discovery |
| `colonization.service.ts` | Colonization flow, colony ships |
| `construction.service.ts` | Building mechanics, cost calculation |
| `trade.service.ts` | Trade routes, galactic market |
| `supply-transport.service.ts` | Transport missions (GDD v6 Section 15) |
| `galaxy-generator.service.ts` | Procedural system/body generation |
| `prestige.service.ts` | New Game+ mechanics |
| `stellar-forge.ts` | Ship construction/upgrades |
| `home-system.service.ts` | Sol initialization |
| `index.ts` | Barrel export of all services |

### Component Files
| File | Purpose |
|------|---------|
| `system-view/` | Display current system details |
| `galaxy-view/` | Galaxy map, system selection |
| `fleet-view/` | Ship fleet status, missions |
| `market-view/` | Galactic market interface |

### Config Files
| File | Contains |
|------|----------|
| `testing.config.ts` | Hardcoded values marked //TESTING |

## By Concern

### Constants & Lookups
- **Resource definitions**: `/src/app/models/resource.model.ts` → `RESOURCE_DEFINITIONS`
- **Facility definitions**: `/src/app/models/facility.model.ts` → `FACILITY_DEFINITIONS`
- **Game version**: `/src/app/models/game-state.model.ts` → `GAME_VERSION`, `PREVIOUS_VERSION`
- **Initial settings**: `/src/app/models/game-state.model.ts` → `INITIAL_GAME_SETTINGS`
- **Initial stats**: `/src/app/models/game-state.model.ts` → `INITIAL_GAME_STATS`

### Type System
- **All enums**: Model files (resource, facility, celestial-body, star-system, ship)
- **All interfaces**: Model files throughout
- **Type aliases**: Mostly in facility.model.ts (FacilityTier, SlotType, etc.)

### Signals & Computed Values
- **Main state signal**: GameStateService._gameState
- **Derived signals**: GameStateService.credits, .systems, .bodies, etc.
- **Computed collections**: GameStateService.systemsList, .discoveredSystems, etc.

### Time & Timing
- **Game loop tick rate**: GameSettings.tickRate
- **Auto-save interval**: GameSettings.autoSaveInterval
- **Time calculations**: All services use deltaHours = deltaMs / (1000 * 60 * 60)
- **Timestamps**: Use Date.now() (milliseconds)

### Testing Values
- **Find all testing values**: `grep -r "//TESTING" src/`
- **Testing config file**: `/src/app/config/testing.config.ts`

## By GDD Section Reference

| GDD Section | Location |
|-------------|----------|
| 2: Home System | `home-system.service.ts` + facility definitions |
| 3: Galaxy Navigation | `galaxy-generator.service.ts` |
| 4: Systems & Bodies | `galaxy-generator.service.ts` + models |
| 5: Construction | `construction.service.ts` |
| 7: Resources | `resource.model.ts` |
| 8: Production | `production.service.ts` |
| 9: Facility Reference | `facility.model.ts` |
| 10: Population | `population.service.ts` |
| 11: System States | `star-system.model.ts` |
| 12: Ships & Fleet | `ship.model.ts` |
| 13: Exploration | `exploration.service.ts` |
| 14: Colonization | `colonization.service.ts` |
| 15: Supply Transport | `supply-transport.service.ts` + `transport-mission.model.ts` |
| 20: Idle Mechanics | `game-loop.service.ts` |
| 24: Prestige System | `prestige.service.ts` + `prestige.model.ts` |

## Module & Imports

### Models Barrel Export
```typescript
// src/app/models/index.ts exports:
export * from './resource.model';
export * from './facility.model';
export * from './celestial-body.model';
export * from './star-system.model';
export * from './ship.model';
export * from './game-state.model';
// Use: import { ResourceId, RESOURCE_DEFINITIONS } from '@app/models';
```

### Services Barrel Export
```typescript
// src/app/services/index.ts exports:
export * from './game-state.service';
export * from './game-loop.service';
// ... all services
// Use: import { GameStateService } from '@app/services';
```

### Dependency Injection Pattern
```typescript
// Always use inject() in services:
private gameState = inject(GameStateService);
private http = inject(HttpClient);

// In components (if needed):
private gameState = inject(GameStateService);
```

## Storage & Persistence

- **Local storage key for game state**: `'idle_game_state'` (GameStateService)
- **Local storage key for settings**: `'idle_game_settings'` (GameStateService)
- **Auto-save trigger**: GameLoopService.tick() checks interval
- **Manual save**: GameStateService.saveGame()
- **Load on init**: GameStateService.loadGame() in app initialization

## Testing & Specs

- **Test files**: `*.spec.ts` alongside source files
- **Test frameworks**: Jasmine + Karma (Angular default)
- **Mock configurations**: In respective *.spec.ts files
- **Testing values**: Marked with `//TESTING` in code

## Search Patterns

Need to find something? Use these grep patterns:

```bash
# Find all testing values
grep -r "//TESTING" src/

# Find all signals
grep -r "signal<" src/app/services/

# Find all computed values
grep -r "computed(() =>" src/app/services/

# Find all service methods
grep -r "^\s*[a-zA-Z].*(): " src/app/services/*.ts

# Find all state updates
grep -r "\.update(" src/

# Find notifications
grep -r "addNotification" src/

# Find resource lookups
grep -r "RESOURCE_DEFINITIONS\[" src/

# Find facility lookups
grep -r "FACILITY_DEFINITIONS\[" src/
```

## Directory Tree (Summary)

```
src/
├── app/
│   ├── components/
│   │   ├── system-view/
│   │   ├── galaxy-view/
│   │   ├── fleet-view/
│   │   └── market-view/
│   ├── models/                    ← All type definitions
│   │   ├── resource.model.ts
│   │   ├── facility.model.ts
│   │   ├── celestial-body.model.ts
│   │   ├── star-system.model.ts
│   │   ├── ship.model.ts
│   │   ├── game-state.model.ts
│   │   ├── prestige.model.ts
│   │   ├── transport-mission.model.ts
│   │   └── index.ts
│   ├── services/                  ← All game logic
│   │   ├── game-state.service.ts
│   │   ├── game-loop.service.ts
│   │   ├── production.service.ts
│   │   ├── population.service.ts
│   │   ├── exploration.service.ts
│   │   ├── colonization.service.ts
│   │   ├── construction.service.ts
│   │   ├── trade.service.ts
│   │   ├── supply-transport.service.ts
│   │   ├── galaxy-generator.service.ts
│   │   ├── prestige.service.ts
│   │   ├── stellar-forge.ts
│   │   ├── home-system.service.ts
│   │   └── index.ts
│   ├── config/
│   │   └── testing.config.ts
│   ├── app.module.ts
│   ├── app-routing.module.ts
│   ├── app.component.ts
│   └── app.component.html
├── index.html
├── main.ts
└── styles.css
```

## Related Documentation

- **Architecture Overview**: `/docs/architecture-overview.md`
- **Models & Types Reference**: `/docs/models-and-types.md`
- **Service API Reference**: `/docs/service-api-reference.md`
- **Game Systems Deep Dive**: `/docs/game-systems.md`
- **Project Conventions**: `/CLAUDE.md` (root IDLE directory)
- **Game Design Document**: `/IDLE_GDD.txt` (root IDLE directory)

## Source Files Referenced

This document is derived from:
- All files in `/src/app/models/`
- All files in `/src/app/services/`
- All files in `/src/app/components/`
- `/src/app/config/testing.config.ts`
- `/src/app/app.module.ts`
- `/CLAUDE.md`
- `/IDLE_GDD.txt`
