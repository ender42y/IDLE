<div class="galaxy-view">
  <div class="galaxy-sidebar">
    <h3>Discovered Systems</h3>
    <div class="systems-list">
      @for (system of systemsList(); track system.id) {
        <div
          class="system-item"
          [class.selected]="selectedSystem()?.id === system.id"
          (click)="selectSystem(system)">
          <div class="system-info">
            <span class="system-name">{{ system.name }}</span>
            <span class="system-rarity rarity-{{ system.rarity }}">{{ system.rarity }}</span>
          </div>
          <div class="system-details">
            <span>{{ getDistance(system) }} ly</span>
            <span>{{ system.bodyIds.length }} bodies</span>
          </div>
        </div>
      }
    </div>

    <!-- Exploration controls moved to Fleet view -->
  </div>

  <div class="galaxy-map-container">
    <canvas
      #galaxyCanvas
      class="galaxy-canvas"
      width="800"
      height="600"
      (click)="onCanvasClick($event)">
    </canvas>
    <div class="map-controls">
      <button (click)="centerOnHome()">Center on Sol</button>
    </div>
  </div>

  <div class="celestial-bodies-sidebar">
    @if (selectedSystem(); as system) {
      <h3>Celestial Bodies</h3>
      <div class="system-name-header">{{ system.name }}</div>
      <div class="bodies-list">
        @for (body of systemBodies(); track body.id) {
          <div
            class="body-item"
            [class.moon]="!!body.parentBodyId">
            <div class="body-icon" [attr.data-type]="body.type">
              @switch (body.type) {
                @case ('star') { â˜€ }
                @case ('gas_giant') { ğŸª }
                @case ('terraformable_planet') { ğŸŒ }
                @case ('terrestrial_planet') { ğŸŒ‘ }
                @case ('icy_moon') { â„ }
                @case ('moon') { ğŸŒ™ }
              }
            </div>
            <div class="body-info">
              <span class="body-name">{{ body.name }}</span>
              <span class="body-type">{{ getBodyTypeName(body) }}</span>
              @if (body.features.length > 0) {
                <div class="body-features">
                  @for (feature of body.features; track feature) {
                    <span class="feature-badge" [title]="getFeatureName(feature)">
                      @switch (feature) {
                        @case ('high_metal_content') { â›ï¸ }
                        @case ('fertile_soil') { ğŸŒ¾ }
                        @case ('rare_element_deposits') { ğŸ’ }
                        @case ('exotic_atmosphere') { ğŸŒ«ï¸ }
                        @case ('ice_deposits') { â„ï¸ }
                        @case ('scenic_vistas') { ğŸï¸ }
                        @case ('habitable') { ğŸ¡ }
                      }
                    </span>
                  }
                </div>
              }
            </div>
            <div class="body-slots">
              <span class="slot-count" title="Surface slots">ğŸ— {{ body.usedSurfaceSlots }}/{{ body.surfaceSlots }}</span>
              <span class="slot-count" title="Orbital slots">ğŸ›° {{ body.usedOrbitalSlots }}/{{ body.orbitalSlots }}</span>
            </div>
          </div>
        }
        @empty {
          <div class="empty-message">No bodies in system</div>
        }
      </div>
    } @else {
      <div class="no-selection">
        <p>Select a system to view celestial bodies</p>
      </div>
    }
  </div>
</div>
